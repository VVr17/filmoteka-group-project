{"mappings":"gfAAAA,EAAA,S,sGAWAC,EAAAC,kBAAkBC,gCAEK,IAAI,EAAAC,EAAAC,UACZC,oBAEf,IAAMC,EAAmBC,SAASC,cAAc,kBAG1CC,GAFU,IAAI,EAAAC,EAAAN,SAAQE,EAAkBK,EAAAP,SAEzBG,SAASC,cAAc,SACtCI,EAAa,IAAI,EAAAC,EAAAT,SAAWK,GAE9BK,EAAc,EAGdC,EAAgBC,EAAK,SAQzB,SAASC,EAAgBC,GACvB,IAAMC,EAAYZ,SAASC,cAAc,uBAE1BY,IAAXF,GACFC,EAAUE,WAAY,EAAAV,EAAAP,SAAS,CAAEc,SAAQI,SAAS,IAElDV,EAAWW,iBAAiBR,EAAcS,QAE1CZ,EAAWa,SAASX,GACpBF,EAAWc,UAEXP,EAAUE,UAAY,E,CAI1B,SAASL,EAAKW,GACZ,IACE,IAAMC,EAAkBC,aAAaC,QAAQH,GAC7C,OAA2B,OAApBC,OAA2BR,EAAYW,KAAKC,MAAMJ,E,CACzD,MAAOK,GACPC,QAAQD,MAAM,oBAAqBA,EAAME,Q,EAI7C,SAASC,EAAMC,EAAeC,GACxBD,EAAcb,QAAU,GAC1BP,EAAgBoB,GACPA,EAAcb,OAAS,IAChCe,EAAUF,EAAeC,E,CAI7B,SAASC,EAAUC,EAAeC,GAKhC,IAHA,IAAMC,EAA0B,GAAdD,EAEZE,EAAa,GACVC,EAFUF,EAAY,GAEFE,EAAQF,EAAWE,SACjBxB,IAAzBoB,EAAcI,IAChBD,EAAWE,KAAKL,EAAcI,IAGlC3B,EAAgB0B,E,CAhDlB/B,EAAWkC,GAAG,aAAa,SAAAC,GAEzBjC,EAAciC,EAAMC,KACpBT,EAAUxB,EAAeD,E,SAgDLM,IAAlBL,GACFqB,EAAMrB,EAAeD,GAIjB,IAAAmC,EAAM1C,SAASC,cAAc,WAC7B0C,EAAWD,EAAIE,iBAAiB,sBAItCF,EAAIG,iBAAiB,SAErB,SAAmBL,GACjB,GAA8B,WAA1BA,EAAMM,OAAOC,SACf,OAEFJ,EAASK,SAAQ,SAAUC,GACzBA,EAAOC,UAAUC,OAAO,iB,IAGO,YAA7BX,EAAMM,OAAOM,aAEfZ,EAAMM,OAAOI,UAAUG,IAAI,kBAC3B7C,EAAgBC,EAAK,SACrBF,EAAc,OACQM,IAAlBL,GACFqB,EAAMrB,EAAeD,QAEDM,IAAlBL,GACFE,EAAgBF,IAGoB,UAA7BgC,EAAMM,OAAOM,cAEtBZ,EAAMM,OAAOI,UAAUG,IAAI,kBAC3B7C,EAAgBC,EAAK,SACrBF,EAAc,OAEQM,IAAlBL,GACFqB,EAAMrB,EAAeD,QAEDM,IAAlBL,GACFE,EAAgBF,G","sources":["src/myLibrary.js"],"sourcesContent":["import './js/utils/handlebars-helpers';\nimport './js/modal';\nimport './js/teamAccordion';\nimport './js/changeTheme';\nimport Pagination from './js/classes/Pagination';\nimport GalleryHandler from './js/classes/GalleryHandler';\nimport template from './templates/movieCard.hbs';\nimport { localStorageFilms } from './js/classes/ModalBtn';\nimport Gallery from './js/classes/Gallery';\n// localStorage.clear();\n\nlocalStorageFilms.saveItemsForArrayAfterReload();\n\nconst galleryHandler = new GalleryHandler();\ngalleryHandler.addGalleryHandler();\n\nconst containerGallery = document.querySelector('.gallery__list');\nconst gallery = new Gallery(containerGallery, template);\n\nconst containerPag = document.querySelector('.pag');\nconst pagination = new Pagination(containerPag);\n\nlet currentPage = 1;\n// let btnStorage = \"watch\";\n// localStorage.setItem(\"btnStorage\", \"watch\");\nlet total_results = load('watch');\n\npagination.on('aftermove', event => {\n  // console.log(event.page);\n  currentPage = event.page;\n  pageValue(total_results, currentPage);\n});\n\nfunction tempRenderCards(movies) {\n  const container = document.querySelector('.gallery__list');\n  // console.log(movies);\n  if (movies !== undefined) {\n    container.innerHTML = template({ movies, library: true });\n\n    pagination.updateTotalItems(total_results.length);\n    // console.log(\"asfdafsasf\",currentPage);\n    pagination.goToPage(currentPage);\n    pagination.render();\n  } else {\n    container.innerHTML = '';\n  }\n}\n\nfunction load(key) {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n}\n\nfunction audit(total_results, currentPage) {\n  if (total_results.length <= 20) {\n    tempRenderCards(total_results);\n  } else if (total_results.length > 20) {\n    pageValue(total_results, currentPage);\n  }\n}\n\nfunction pageValue(total_results, currentPage) {\n  // console.log(currentPage);\n  const lastMovie = currentPage * 20;\n  const firstMovie = lastMovie - 20;\n  const moviesPars = [];\n  for (let index = firstMovie; index < lastMovie; index++) {\n    if (total_results[index] !== undefined) {\n      moviesPars.push(total_results[index]);\n    }\n  }\n  tempRenderCards(moviesPars);\n}\n\nif (total_results !== undefined) {\n  audit(total_results, currentPage);\n}\n\n// КНОПКИ\nconst btn = document.querySelector('.header');\nconst btnWatch = btn.querySelectorAll('.button--dark-mode');\n// console.log(btnWatch);\n\n// КНОПКИ\nbtn.addEventListener('click', selectBtn);\n\nfunction selectBtn(event) {\n  if (event.target.nodeName !== 'BUTTON') {\n    return;\n  }\n  btnWatch.forEach(function (button) {\n    button.classList.remove('button--active');\n  });\n\n  if (event.target.textContent === 'watched') {\n    // console.log(\"watched\")\n    event.target.classList.add('button--active');\n    total_results = load('watch');\n    currentPage = 1;\n    if (total_results !== undefined) {\n      audit(total_results, currentPage);\n    }\n    if (total_results === undefined) {\n      tempRenderCards(total_results, currentPage);\n    }\n    // console.log(currentPage)\n  } else if (event.target.textContent === 'queue') {\n    // console.log(\"queue\");\n    event.target.classList.add('button--active');\n    total_results = load('queue');\n    currentPage = 1;\n\n    if (total_results !== undefined) {\n      audit(total_results, currentPage);\n    }\n    if (total_results === undefined) {\n      tempRenderCards(total_results, currentPage);\n    }\n\n    // location.reload()\n    // console.log(currentPage)\n  }\n}\n"],"names":["parcelRequire","$8Seta","localStorageFilms","saveItemsForArrayAfterReload","$7MumP","default","addGalleryHandler","$de91a1af95a41f9e$var$containerGallery","document","querySelector","$de91a1af95a41f9e$var$containerPag","$gOExu","$85dma","$de91a1af95a41f9e$var$pagination","$fc6Dh","$de91a1af95a41f9e$var$currentPage","$de91a1af95a41f9e$var$total_results","$de91a1af95a41f9e$var$load","$de91a1af95a41f9e$var$tempRenderCards","movies","container","undefined","innerHTML","library","updateTotalItems","length","goToPage","render","key","serializedState","localStorage","getItem","JSON","parse","error","console","message","$de91a1af95a41f9e$var$audit","total_results1","currentPage1","$de91a1af95a41f9e$var$pageValue","total_results2","currentPage2","lastMovie","moviesPars","index","push","on","event","page","$de91a1af95a41f9e$var$btn","$de91a1af95a41f9e$var$btnWatch","querySelectorAll","addEventListener","target","nodeName","forEach","button","classList","remove","textContent","add"],"version":3,"file":"myLibrary.1ebce5c3.js.map"}