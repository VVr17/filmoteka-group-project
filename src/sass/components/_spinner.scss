$n: 4;
$d: 2.5em;
$r: 0.5 * $d;
$g: $r;
$u: $d + $g;
$b: 9;
$t: 2s;

.spinner-container,
.spinner {
  display: grid;
}

.spinner-container {
  overflow: hidden;
  margin: 0;
  height: 100vh;

  &::before,
  .spinner {
    grid-area: 1/ 1;
  }

  &::before {
    background: #7374fe;
    content: '';
  }
}

.spinner {
  grid-gap: $g;
  grid-template: #{$d}/ repeat($n, $d);
  place-content: center;
  transform: translate(-1 * $u);
  background: #000;
  filter: blur($b * 1px) contrast(3 * $b) blur(1px);
  mix-blend-mode: lighten;
  animation: p $t cubic-bezier(0.32, 1, 0.68, 1) infinite;

  &::before,
  &::after {
    --i: 0;
    grid-column: calc(1 + var(--i)) / span calc(1 + var(--i) * (#{$n} - 1));
    background: radial-gradient(circle, #fff $r, #000 0) -0.5 * $r/ #{$u};
    animation: inherit;
    animation-name: b;
    animation-duration: calc((1 - var(--i)) *#{$t});
    content: '';
  }

  &::after {
    --i: 1;
  }
}

@keyframes p {
  0%,
  75% {
    transform: none;
  }
}

@keyframes b {
  75%,
  100% {
    transform: translate($n * $u);
  }
}
