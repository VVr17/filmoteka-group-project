function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},s={},r=t.parcelRequired7c6;null==r&&((r=function(e){if(e in a)return a[e].exports;if(e in s){var t=s[e];delete s[e];var r={id:e,exports:{}};return a[e]=r,t.call(r.exports,r,r.exports),r.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){s[e]=t},t.parcelRequired7c6=r),r("98X4p"),r("lyacN"),r("kWAVo");var i=r("jkMrE"),n=r("g6yUq"),o=r("2shzp").default,l=new WeakMap,c=new WeakMap,u=new WeakMap;r("bTcpz");const h=document.querySelector(".search-form"),d=document.querySelector(".search-input");null==h||h.addEventListener("submit",(function(e){e.preventDefault();let t=d.value;if(t.trim(),p.searchMovies("Killer"),""==t)return h.dataset.message="Search attempt not successful. Please, enter movie name.",void setTimeout((()=>{h.dataset.message=""}),5500);p.getMovies(t,1)}));const p=new class{async searchMovies(t){try{return await o.get(e(i)(this,c),e(i)(this,u))}catch(e){}}async getMovies(t,a){t&&(e(i)(this,u).params.query=t,e(i)(this,u).params.page=a);const s=await this.searchMovies();return console.log(s),s}constructor(){e(n)(this,l,{writable:!0,value:"1351fe1fee33f4dc7ca86c3a4fb4a61c"}),e(n)(this,c,{writable:!0,value:"https://api.themoviedb.org/3/search/movie"}),e(n)(this,u,{writable:!0,value:{params:{api_key:e(i)(this,l),query:"",include_adult:!1}}})}};var v=r("9M0Rn"),f=(i=r("jkMrE"),n=r("g6yUq"),r("2shzp").default),w=new WeakMap,g=new WeakMap,y=new WeakMap,m=new WeakMap,M=new WeakMap,b=new WeakMap;class k{async fetchGenres(){try{const t=await f.get(e(i)(this,g),e(i)(this,b));return t.data.genres}catch(e){console.error(e)}}async fetchTrendingMovies(t=1){const a={params:{api_key:e(i)(this,w),page:t}};try{return await f.get(e(i)(this,y),a)}catch(e){console.error(e)}}async fetchMoviesByName(){try{return await f.get(e(i)(this,m),e(i)(this,M))}catch(e){console.error(e)}}async getMoviesByName(t){t&&(e(i)(this,M).query=t,e(i)(this,M).page=1);return(await this.fetchMoviesByName()).data.results}constructor(){e(n)(this,w,{writable:!0,value:"1351fe1fee33f4dc7ca86c3a4fb4a61c"}),e(n)(this,g,{writable:!0,value:"https://api.themoviedb.org/3/genre/movie/list"}),e(n)(this,y,{writable:!0,value:"https://api.themoviedb.org/3/trending/movie/day"}),e(n)(this,m,{writable:!0,value:"https://api.themoviedb.org/3/search/movie"}),e(n)(this,M,{writable:!0,value:{params:{api_key:e(i)(this,w),query:"",page:1,include_adult:!1}}}),e(n)(this,b,{writable:!0,value:{params:{api_key:e(i)(this,w)}}})}}var q=r("6nUKJ");i=r("jkMrE"),n=r("g6yUq");var W=r("gMe87"),_=r("8WKcv"),T=r("cEPyp");const E=new k,S=new(0,_.default);var j=new WeakMap,N=new WeakMap;var R=r("hMpod");new k;(new(0,q.default)).addGalleryHandler();const U=document.querySelector(".js-gallery"),x=new class{async getPopularMovies(e){this.genres=await E.fetchGenres();return(await E.fetchTrendingMovies(e)).data}renderCards(t){S.update(t,this.genres),e(i)(this,j).innerHTML=e(i)(this,N).call(this,{movies:t,library:!1}),T.localStorageFilms.addItemsOnCurrentPage(t)}constructor(t,a){e(n)(this,j,{writable:!0,value:void 0}),e(n)(this,N,{writable:!0,value:void 0}),e(W)(this,j,t),e(W)(this,N,a),this.currentQuery="",this.genres=null}}(U,R.default),L=document.querySelector(".pag"),P=new(0,v.default)(L),C=new class{hide(){this.buttonRef.classList.add("is-hidden"),this.hidden=!0}show(){this.buttonRef.classList.remove("is-hidden"),this.hidden=!1}constructor(e){this.buttonRef=document.querySelector(e),this.hidden=!0}}(".js-spinner");async function O(e=1){C.show();try{const t=await x.getPopularMovies(e);C.hide(),console.log(t),x.renderCards(t.results),P.updateTotalItems(t.total_results),P.render()}catch(e){console.error(e)}}P.on("aftermove",(e=>{console.log(e.page),O(e.page)})),O(),r("16eij");
//# sourceMappingURL=index.c7a8da2f.js.map
