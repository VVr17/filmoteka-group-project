{"mappings":"gfAAAA,EAAA,S,sGAWAC,EAAAC,kBAAkBC,gCAEK,IAAI,EAAAC,EAAAC,UACZC,oBAEf,IAAMC,EAAmBC,SAASC,cAAc,kBAG1CC,GAFU,IAAI,EAAAC,EAAAN,SAAQE,EAAkBK,EAAAP,SAEzBG,SAASC,cAAc,SACtCI,EAAa,IAAI,EAAAC,EAAAT,SAAWK,GAE9BK,EAAc,EAGdC,EAAgBC,EAAK,SAQzB,SAASC,EAAgBC,GACLX,SAASC,cAAc,kBAE/BW,WAAY,EAAAR,EAAAP,SAAS,CAAEc,SAAQE,SAAS,IAElDR,EAAWS,iBAAiBN,EAAcO,QAExCV,EAAWW,SAAST,GACtBF,EAAWY,Q,CAIb,SAASR,EAAKS,GACZ,IACE,IAAMC,EAAkBC,aAAaC,QAAQH,GAC7C,OAA2B,OAApBC,OAA2BG,EAAYC,KAAKC,MAAML,E,CACzD,MAAOM,GACPC,QAAQD,MAAM,oBAAqBA,EAAME,Q,EAK7C,SAASC,EAAMC,EAAeC,GACxBD,EAAcd,QAAU,GAC5BL,EAAgBmB,GAETA,EAAcd,OAAS,IAC9BgB,EAAUF,EAAeC,E,CAG3B,SAASC,EAAUC,EAAeC,GAKhC,IAHI,IAAMC,EAA0B,GAAdD,EAEhBE,EAAa,GACVC,EAFWF,EAAY,GAEHE,EAAQF,EAAWE,SACjBd,IAAzBU,EAAcI,IAClBD,EAAWE,KAAKL,EAAcI,IAIhC1B,EAAgByB,E,CA/ClB9B,EAAWiC,GAAG,aAAa,SAAAC,GAEzBhC,EAAcgC,EAAMC,KACpBT,EAAUvB,EAAeD,E,SA+CLe,IAAlBd,GACFoB,EAAMpB,EAAeD,GAMjB,IAAAkC,EAAMzC,SAASC,cAAc,WAC7ByC,EAAWD,EAAIE,iBAAiB,sBAItCF,EAAIG,iBAAiB,SAErB,SAAmBL,GACjB,GAA8B,WAA1BA,EAAMM,OAAOC,SACf,OAEFJ,EAASK,SAAQ,SAAUC,GACzBA,EAAOC,UAAUC,OAAO,iB,IAGO,YAA7BX,EAAMM,OAAOM,aAEfZ,EAAMM,OAAOI,UAAUG,IAAI,kBAG3BxB,EAFApB,EAAgBC,EAAK,SACzBF,EAAc,IAI0B,UAA7BgC,EAAMM,OAAOM,cAEpBZ,EAAMM,OAAOI,UAAUG,IAAI,kBAI3BxB,EAHApB,EAAgBC,EAAK,SACrBF,EAAc,G","sources":["src/myLibrary.js"],"sourcesContent":["import './js/utils/handlebars-helpers';\nimport './js/classes/HeaderBtnHandler';\nimport './js/modal';\nimport './js/teamAccordion';\nimport Pagination from './js/classes/Pagination';\nimport GalleryHandler from './js/classes/GalleryHandler';\nimport template from './templates/movieCard.hbs';\nimport { localStorageFilms } from './js/classes/ModalBtn';\nimport Gallery from './js/classes/Gallery';\n// localStorage.clear();\n\nlocalStorageFilms.saveItemsForArrayAfterReload();\n\nconst galleryHandler = new GalleryHandler();\ngalleryHandler.addGalleryHandler();\n\nconst containerGallery = document.querySelector('.gallery__list');\nconst gallery = new Gallery(containerGallery, template);\n\nconst containerPag = document.querySelector('.pag');\nconst pagination = new Pagination(containerPag);\n\nlet currentPage = 1;\n// let btnStorage = \"watch\";\n// localStorage.setItem(\"btnStorage\", \"watch\");\nlet total_results = load('watch');\n\npagination.on('aftermove', event => {\n  // console.log(event.page);\n  currentPage = event.page;\n  pageValue(total_results, currentPage)\n});\n\nfunction tempRenderCards(movies) {\n  const container = document.querySelector('.gallery__list');\n  // console.log(movies);\n  container.innerHTML = template({ movies, library: true });\n\n  pagination.updateTotalItems(total_results.length);\n    // console.log(\"asfdafsasf\",currentPage);\n    pagination.goToPage(currentPage);\n  pagination.render();\n};\n\n\nfunction load(key) {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n};\n\n\nfunction audit(total_results, currentPage) {\n  if (total_results.length <= 20) {\n  tempRenderCards(total_results);\n}\nelse if (total_results.length > 20) {\n  pageValue(total_results, currentPage)\n}}\n\nfunction pageValue(total_results, currentPage) {\n  // console.log(currentPage);\n      const lastMovie = currentPage * 20;\n   const firstMovie = lastMovie - 20;\n  const moviesPars = [];\n  for (let index = firstMovie; index < lastMovie; index++) {\n    if (total_results[index] !== undefined) {\n    moviesPars.push(total_results[index]);\n  }\n   \n}\n  tempRenderCards(moviesPars);\n}\n\nif (total_results !== undefined) {\n  audit(total_results, currentPage);\n}\n\n\n\n// КНОПКИ\nconst btn = document.querySelector('.header');\nconst btnWatch = btn.querySelectorAll('.button--dark-mode');\n// console.log(btnWatch);\n\n// КНОПКИ\nbtn.addEventListener(\"click\", selectBtn);\n\nfunction selectBtn(event) {\n  if (event.target.nodeName !== 'BUTTON') {\n    return;\n  }\n  btnWatch.forEach(function (button) {\n    button.classList.remove('button--active');\n  });\n\n  if (event.target.textContent === 'watched') {\n    // console.log(\"watched\")\n    event.target.classList.add('button--active')\n    total_results = load('watch');\ncurrentPage = 1;\n    audit(total_results, currentPage);\n// console.log(currentPage)\n  }\n  else if (event.target.textContent === 'queue') {\n    // console.log(\"queue\");\n    event.target.classList.add('button--active');\n    total_results = load('queue');\n    currentPage = 1;\n\n    audit(total_results, currentPage);\n    // location.reload()\n    // console.log(currentPage)\n  }\n}\n\n\n"],"names":["parcelRequire","$8Seta","localStorageFilms","saveItemsForArrayAfterReload","$7MumP","default","addGalleryHandler","$de91a1af95a41f9e$var$containerGallery","document","querySelector","$de91a1af95a41f9e$var$containerPag","$gOExu","$85dma","$de91a1af95a41f9e$var$pagination","$fc6Dh","$de91a1af95a41f9e$var$currentPage","$de91a1af95a41f9e$var$total_results","$de91a1af95a41f9e$var$load","$de91a1af95a41f9e$var$tempRenderCards","movies","innerHTML","library","updateTotalItems","length","goToPage","render","key","serializedState","localStorage","getItem","undefined","JSON","parse","error","console","message","$de91a1af95a41f9e$var$audit","total_results1","currentPage1","$de91a1af95a41f9e$var$pageValue","total_results2","currentPage2","lastMovie","moviesPars","index","push","on","event","page","$de91a1af95a41f9e$var$btn","$de91a1af95a41f9e$var$btnWatch","querySelectorAll","addEventListener","target","nodeName","forEach","button","classList","remove","textContent","add"],"version":3,"file":"myLibrary.0b958a84.js.map"}