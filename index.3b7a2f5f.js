function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s={},i={},r=t.parcelRequired7c6;null==r&&((r=function(e){if(e in s)return s[e].exports;if(e in i){var t=i[e];delete i[e];var r={id:e,exports:{}};return s[e]=r,t.call(r.exports,r,r.exports),r.exports}var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){i[e]=t},t.parcelRequired7c6=r),r("98X4p"),r("9M0Rn"),r("gScR6"),r("1wH5c");var n=r("6mZGd"),a=r("jkMrE"),o=r("g6yUq"),l=r("gMe87"),c=(n=r("6mZGd"),r("8WKcv")),u=r("cEPyp"),d=r("bGr86");const h=new(0,n.default),f=new(0,c.default);var v=new WeakMap,g=new WeakMap;var w=r("6nUKJ"),p=(u=r("cEPyp"),r("9M0Rn"));d=r("bGr86");var y=r("hMpod"),m=r("hXrWV"),M=(d=r("bGr86"),a=r("jkMrE"),o=r("g6yUq"),l=r("gMe87"),r("iJYdK")),T=new WeakMap,b=new WeakMap,R=new WeakMap,L=new WeakMap;new(0,n.default);(new(0,w.default)).addGalleryHandler();const E=new class{async getPopularMovies(e){this.genres=await h.fetchGenres();return(await h.fetchTrendingMovies(e)).data}renderCards(t){f.update(t,this.genres),e(a)(this,v).innerHTML=e(a)(this,g).call(this,{movies:t,library:!1}),d.headerRef.scrollIntoView(top),u.localStorageFilms.addItemsOnCurrentPage(t)}async getQueryMovies(e,t=1){if(this.currentQuery=e,""===e)return;return await h.getMoviesByName(e,t)}async getMovieDetails(e){if(!e)return;return await h.fetchMoviesByID(e)}constructor(t,s){e(o)(this,v,{writable:!0,value:void 0}),e(o)(this,g,{writable:!0,value:void 0}),e(l)(this,v,t),e(l)(this,g,s),this.currentQuery="",this.genres=null}}(d.containerGallery,y.default),C=new(0,p.default)(d.containerPag),F=new class{hide(){this.spinnerRef.classList.add("is-hidden"),this.hidden=!0}show(){this.spinnerRef.classList.remove("is-hidden"),this.hidden=!1}constructor(){this.spinnerRef=d.spinnerRef,this.hidden=!0}},S=new class{notifyFailure(){e(a)(this,R)&&(e(l)(this,R,!1),this.note.classList.add("failure"),this.note.classList.remove("invisible","success"),this.note.innerHTML=`${e(a)(this,b)}`,setTimeout((()=>{e(a)(this,L)&&this.note.classList.add("invisible")}),3e3),setTimeout((()=>{e(l)(this,R,!0),e(a)(this,L)&&(this.note.classList.remove("failure"),this.note.innerHTML="")}),4e3))}notifySuccess(){e(a)(this,L)&&(e(l)(this,L,!1),this.note.classList.add("success"),this.note.classList.remove("invisible","failure"),this.note.innerHTML=`${e(a)(this,T)}`,setTimeout((()=>{e(a)(this,R)&&this.note.classList.add("invisible")}),3e3),setTimeout((()=>{e(l)(this,L,!0),e(a)(this,R)&&(this.note.classList.remove("success"),this.note.innerHTML="")}),4e3))}constructor(){e(o)(this,T,{writable:!0,value:"Search result successfull!"}),e(o)(this,b,{writable:!0,value:"Search result not successfull. Enter the movie name and try again!"}),e(M)(this,"note",document.querySelector(".notify")),e(o)(this,R,{writable:!0,value:!0}),e(o)(this,L,{writable:!0,value:!0})}};async function _(e=1){F.show();try{const t=await E.getPopularMovies(e);F.hide(),E.renderCards(t.results),C.updateTotalItems(t.total_results),C.goToPage(e),C.render()}catch(e){console.error(e)}}async function H(e,t=1){try{const s=await E.getQueryMovies(e,t);if(!s)return k(m.NOTIFY_UNCORRECT_SEARCH),void _();if(0===s.total_results)return k(m.NOTIFY_UNCORRECT_SEARCH),void _();console.log("Searched Movies:",s),S.notifySuccess(),E.renderCards(s.results),C.updateTotalItems(s.total_results),C.goToPage(t),C.render()}catch(e){console.log(e)}}function k(e){d.searchFormRef.dataset.message=e,S.notifyFailure(),setTimeout((()=>{d.searchFormRef.dataset.message=""}),4e3)}d.searchFormRef.addEventListener("submit",(function(e){e.preventDefault();H(e.target.elements.search.value.trim())&&this.reset()})),C.on("aftermove",(e=>{E.currentQuery?H(E.currentQuery,e.page):_(e.page)})),u.localStorageFilms.saveItemsForArrayAfterReload(),_(),r("bTcpz"),r("16eij");
//# sourceMappingURL=index.3b7a2f5f.js.map
