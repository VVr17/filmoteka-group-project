!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){r[e]=t},t.parcelRequired7c6=a),a("2p6Fd"),a("fc6Dh"),a("grfDF"),a("3jSZ7");var i=a("bpxeT"),u=a("2TvXO"),o=a("bKaad"),l=a("ikGeD"),s=a("8MBJY"),c=a("a2hTj"),f=(o=a("bKaad"),l=a("ikGeD"),a("l5bVx")),d=e(a("WMajR")).template({1:function(t,n,r,a,i){var u,o=null!=n?n:t.nullContext||{},l=t.hooks.helperMissing,s="function",c=t.escapeExpression,d=t.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"  <option value="+c((void 0===(u=null!=(u=d(r,"id")||(null!=n?d(n,"id"):n))?u:l)?"undefined":e(f)(u))===s?u.call(o,{name:"id",hash:{},data:i,loc:{start:{line:2,column:16},end:{line:2,column:22}}}):u)+">"+c((void 0===(u=null!=(u=d(r,"name")||(null!=n?d(n,"name"):n))?u:l)?"undefined":e(f)(u))===s?u.call(o,{name:"name",hash:{},data:i,loc:{start:{line:2,column:23},end:{line:2,column:31}}}):u)+"</option>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,a){var i;return null!=(i=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:1,column:0},end:{line:3,column:9}}}))?i:""},useData:!0}),p=a("8Seta"),h=a("fc6Dh"),v=e(a("WMajR")).template({1:function(e,t,n,r,a){var i=e.lambda,u=e.escapeExpression;return"  <option value="+u(i(t,t))+">"+u(i(t,t))+"</option>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,a){var i;return null!=(i=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:1,column:0},end:{line:3,column:9}}}))?i:""},useData:!0}),m=(new(0,o.default),new(0,h.default)(l.containerPag),function(){"use strict";function t(){e(s)(this,t),this.isEmpty=!0,this.genreId=null,this.year=null}return e(c)(t,[{key:"renderFilter",value:function(){var e=p.localStorageFilms.getItemFromKeyStorage(p.localStorageFilms.LOCAL_STORAGE_KEYS.genres);l.genreSelectRef.insertAdjacentHTML("beforeend",d(e));for(var t=[],n=2022;n>=1980;n-=1)t.push(n);l.yearSelectRef.insertAdjacentHTML("beforeend",v(t)),this.isEmpty=!1}},{key:"addHandler",value:function(e){l.filterFormRef.addEventListener("change",e)}}]),t}()),g=(i=a("bpxeT"),s=a("8MBJY"),a("4KMWL")),y=a("8MQK7"),w=a("dPxxm"),x=(c=a("a2hTj"),u=a("2TvXO"),o=a("bKaad"),a("1LeHf")),b=(p=a("8Seta"),l=a("ikGeD"),new(0,o.default)),k=new(0,x.default),M=new WeakMap,T=new WeakMap,R=function(){"use strict";function t(n,r){e(s)(this,t),e(y)(this,M,{writable:!0,value:void 0}),e(y)(this,T,{writable:!0,value:void 0}),e(w)(this,M,n),e(w)(this,T,r),this.currentQuery="",this.genres=null,this.filterIsComplete=!1}return e(c)(t,[{key:"getPopularMovies",value:function(t){var n=this;return e(i)(e(u).mark((function r(){var a;return e(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.genres){e.next=5;break}return e.next=3,b.fetchGenres();case 3:n.genres=e.sent,p.localStorageFilms.addGenres(n.genres);case 5:return e.next=7,b.fetchTrendingMovies(t);case 7:return a=e.sent,e.abrupt("return",a.data);case 9:case"end":return e.stop()}}),r)})))()}},{key:"renderCards",value:function(t){k.update(t,this.genres),e(g)(this,M).innerHTML=e(g)(this,T).call(this,{movies:t,library:!1}),l.headerRef.scrollIntoView(top),p.localStorageFilms.addItemsOnCurrentPage(t)}},{key:"getQueryMovies",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=this;return e(i)(e(u).mark((function a(){var i;return e(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.currentQuery=t,t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,b.getMoviesByName(t,n);case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}}),a)})))()}},{key:"getMovieDetails",value:function(t){return e(i)(e(u).mark((function n(){var r;return e(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,b.fetchMoviesByID(t);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),n)})))()}}]),t}(),I=a("7MumP"),C=(p=a("8Seta"),a("iqi4A")),S=a("4Uk0b"),D=(h=a("fc6Dh"),s=a("8MBJY"),c=a("a2hTj"),l=a("ikGeD"),function(){"use strict";function t(){e(s)(this,t),this.spinnerRef=l.spinnerRef,this.hidden=!0}return e(c)(t,[{key:"hide",value:function(){this.spinnerRef.classList.add("is-hidden"),this.hidden=!0}},{key:"show",value:function(){this.spinnerRef.classList.remove("is-hidden"),this.hidden=!1}}]),t}()),F=a("85dma"),O=new(0,o.default);(new(0,I.default)).addGalleryHandler();var P=new R(l.containerGallery,F.default),E=new(0,h.default)(l.containerPag),j=new D,L=new(0,S.default),_=new m;function G(){return Q.apply(this,arguments)}function Q(){return Q=e(i)(e(u).mark((function t(){var n,r,a=arguments;return e(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>0&&void 0!==a[0]?a[0]:1,j.show(),e.prev=2,e.next=5,P.getPopularMovies(n);case 5:r=e.sent,j.hide(),P.renderCards(r.results),E.updateTotalItems(r.total_results),E.goToPage(n),E.render(),_.isEmpty&&_.renderFilter(),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),console.error(e.t0);case 17:case"end":return e.stop()}}),t,null,[[2,14]])}))),Q.apply(this,arguments)}function A(e){return H.apply(this,arguments)}function H(){return H=e(i)(e(u).mark((function t(n){var r,a,i=arguments;return e(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:1,e.prev=1,e.next=4,P.getQueryMovies(n,r);case 4:if((a=e.sent)&&a.total_results){e.next=9;break}return K(C.NOTIFY_UNCORRECT_SEARCH),G(),e.abrupt("return");case 9:L.notifySuccess(),P.renderCards(a.results),E.updateTotalItems(a.total_results),E.goToPage(r),E.render(),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),console.log(e.t0);case 19:case"end":return e.stop()}}),t,null,[[1,16]])}))),H.apply(this,arguments)}function K(e){L.notifyFailure()}function B(e){return N.apply(this,arguments)}function N(){return(N=e(i)(e(u).mark((function t(n){var r;return e(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.fetchDiscoverMovies(_.genreId,_.year,n);case 3:r=e.sent,P.renderCards(r.results),E.updateTotalItems(r.total_results),E.goToPage(n),E.render(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),t,null,[[0,10]])})))).apply(this,arguments)}_.addHandler((function(e){e.preventDefault(),P.currentQuery="";var t=e.currentTarget.elements,n=t.genre,r=t.year;_.genreId=+n.value,_.year=+r.value,(0!==_.genreId||0!==_.year)&&(P.filterIsComplete=!0,B(1));if(!_.genreId&&!_.year)return P.filterIsComplete=!1,void G()})),l.searchFormRef.addEventListener("submit",(function(e){e.preventDefault(),A(e.target.elements.search.value.trim())&&this.reset();l.genreSelectRef.value=0,l.yearSelectRef.value=0,P.filterIsComplete=!1})),E.on("aftermove",(function(e){P.currentQuery||P.filterIsComplete||G(e.page),P.currentQuery&&A(P.currentQuery,e.page),P.filterIsComplete&&B(e.page)})),p.localStorageFilms.saveItemsForArrayAfterReload(),G(),a("5xtVg"),a("aruhj"),a("euqRf")}();
//# sourceMappingURL=index.9bc2b2fe.js.map
