{"mappings":"iiBAEAA,EAAA,SCDA,IAAAC,EAAAD,EAAA,S,kFAAME,QAwBAC,EAAe,mCAOfC,GANgB,4DAAyEC,OAAbF,EAAa,mBAC5E,yDAAsEE,OAAbF,GAKxD,IAAI,EAAAG,EAAAJ,UAmDlBK,EAAoBC,SAASC,cAAc,a,SAkBlCC,I,OAAAA,EAAfC,EAAAV,EAAA,CAAAU,EAAAC,GAAAC,MAAA,SAAAC,EAAmCC,G,IAC3BC,E,yEAAAA,EAAMC,sCAA0BF,EAAU,YAAcZ,EAC9De,QAAQC,IAAIH,G,SACWI,EAAMC,IAAIL,G,OAIjCM,EAJcC,EAAAC,KAImBC,M,4CAPDC,MAAAC,KAAAC,U,CAUlC,SAASN,EAAwBO,GAC/BtB,EAAkBuB,UAAUC,OAAO,aAAa,GAIhD3B,EAAY4B,iBAAiBH,GAMRtB,EAAkBE,cAAc,oBACxCwB,WAAY,EAAAC,EAAAhC,SAA0B2B,E,CAvClCrB,SAASC,cAAc,YAE/B0B,iBAAiB,SAE5B,SAA4BC,GAC1BA,EAAEC,iBAEF,IAAMC,EAAUF,EAAEG,OAAOC,QAAQ,qBACjC,IAAKF,EACH,Q,SAQ+BvB,GAApBL,EAAmBgB,MAAAC,KAAAC,U,CAHhCa,CAFgBH,EAAQI,QAAQ3B,Q,uHD/E5B4B,EAAiB,IAAI,EAAAC,EAAA1C,SAC3ByC,EAAeE,oBAEf,IAAMC,EAAetC,SAASC,cAAc,QACtCsC,EAAa,IAAI,EAAAC,EAAA9C,SAAW4C,GAElCG,EAAAC,kBAAkBC,+BAElBjC,QAAQC,IAAI,0BACZD,QAAQC,IAAI,aAAc4B,GAC1B7B,QAAQC,IAAI,WAAYiC,EAAAlD,SACxBgB,QAAQC,IAAI,iBAAkBwB,GAa9B,IAAMU,EAAmB7C,SAASC,cAAc,kBAChC,IAAI,EAAA6C,EAAApD,SAAQmD,EAAkBD,EAAAlD,SAI9B,IAAI,EAAAqD,EAAArD,SAAQ,eAGb,SAAAsD,EAAcC,GAC3B,IACE,IAAMC,EAAkBC,aAAaC,QAAQH,GAC7C,OAA2B,OAApBC,OAA2BG,EAAYC,KAAKC,MAAML,E,CACzD,MAAOM,GACP9C,QAAQ8C,MAAM,oBAAqBA,EAAMC,Q,EAM7C,IAAMC,EAASV,EAAK,SACdW,EAASX,EAAK,SAEpBtC,QAAQC,IAAI+C,QAEGL,IAAXK,GACEA,EAAOE,OAAS,GAClBC,EAAgBH,GAIpB,IAAMI,EAAM9D,SAASC,cAAc,WAC7B8D,EAAWD,EAAIE,iBAAiB,sBAyBtC,SAASH,EAAgBI,GACLjE,SAASC,cAAc,kBAC/BwB,WAAY,EAAAmB,EAAAlD,SAAS,CAAEuE,SAAQC,SAAS,G,CA1BpDxD,QAAQC,IAAIoD,GAEZD,EAAInC,iBAAiB,SAErB,SAAmBwC,GACjB,GAA8B,WAA1BA,EAAMpC,OAAOqC,SACf,OAEFL,EAASM,SAAQ,SAAUC,GACzBA,EAAOhD,UAAUiD,OAAO,iB,IAGO,YAA7BJ,EAAMpC,OAAOyC,aAEfL,EAAMpC,OAAOT,UAAUmD,IAAI,kBAE3BZ,EAAgBH,IACsB,UAA7BS,EAAMpC,OAAOyC,cAEtBL,EAAMpC,OAAOT,UAAUmD,IAAI,kBAC3BZ,EAAgBF,G","sources":["src/myLibrary.js","src/js/temp/antonTempTest.js"],"sourcesContent":["// do not write code here\n// only import can be inserted\nimport './js/utils/handlebars-helpers';\n\n//Anton's temporary test code----------------------------\nimport './js/temp/antonTempTest';\n//Anton's temporary test code----------------------------\n\nimport './js/classes/HeaderBtnHandler';\nimport './js/modal';\nimport './js/teamAccordion';\n\nimport Pagination from './js/classes/Pagination';\nimport GalleryHandler from './js/classes/GalleryHandler';\nimport template from './templates/movieCard.hbs';\nimport { localStorageFilms } from './js/classes/ModalBtn';\n\nconst galleryHandler = new GalleryHandler();\ngalleryHandler.addGalleryHandler();\n\nconst containerPag = document.querySelector('.pag');\nconst pagination = new Pagination(containerPag);\n\nlocalStorageFilms.saveItemsForArrayAfterReload();\n\nconsole.log('this is inside Library');\nconsole.log('pagination', pagination);\nconsole.log('template', template);\nconsole.log('galleryHandler', galleryHandler);\n\n// import './js/utils/handlebars-helpers';\n// import movieCardTemplate from './templates/movieCard.hbs';\n// import localStorageFilms from './js/classes/ModalBtn';\n\n// import Pagination from './classes/Pagination';\n// import ApiService from './classes/ApiService';\n// import GalleryHandler from './classes/GalleryHandler';\nimport Spinner from './js/classes/spinner';\nimport Gallery from './js/classes/Gallery';\n// import template from '../templates/movieCard.hbs';\n\nconst containerGallery = document.querySelector('.gallery__list');\nconst gallery = new Gallery(containerGallery, template);\n\n// const containerPag = document.querySelector('.pag');\n// const pagination = new Pagination(containerPag);\nconst spinner = new Spinner('.js-spinner');\n\n// ф-ция взять из локал стор\nexport default function load(key) {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n}\n\n// localStorage.clear();\n\nconst keyOne = load('watch');\nconst keyTwo = load('queue');\n\nconsole.log(keyOne);\n\nif (keyOne !== undefined) {\n  if (keyOne.length > 0) {\n    tempRenderCards(keyOne);\n  }\n}\n\nconst btn = document.querySelector('.header');\nconst btnWatch = btn.querySelectorAll('.button--dark-mode');\nconsole.log(btnWatch);\n\nbtn.addEventListener('click', selectBtn);\n\nfunction selectBtn(event) {\n  if (event.target.nodeName !== 'BUTTON') {\n    return;\n  }\n  btnWatch.forEach(function (button) {\n    button.classList.remove('button--active');\n  });\n\n  if (event.target.textContent === 'watched') {\n    // console.log(\"watched\")\n    event.target.classList.add('button--active');\n\n    tempRenderCards(keyOne);\n  } else if (event.target.textContent === 'queue') {\n    // console.log(\"queue\");\n    event.target.classList.add('button--active');\n    tempRenderCards(keyTwo);\n  }\n}\n\nfunction tempRenderCards(movies) {\n  const container = document.querySelector('.gallery__list');\n  container.innerHTML = template({ movies, library: true });\n}\n\n// if (window.location.pathname === '/myLibrary.html') {\n//   pagination.on('aftermove', event => {\n//   console.log(event.page);\n\n//   fetchMovies(event.page);\n// });\n\n// fetchMovies();\n\n// async function fetchMovies(page = 1) {\n//   spinner.show();\n//   try {\n//     const movies = await gallery.tempRenderCards(page);\n//     spinner.hide();\n//     console.log(movies);\n//     gallery.renderCards(movies.results);\n\n//     pagination.updateTotalItems(movies.total_results);\n//     pagination.render();\n//   } catch (error) {\n//     console.error(error);\n//   }\n// }\n\n// }\n","//Anton's temporary code\nconst axios = require('axios').default;\n// import '../utils/handlebars-helpers';\nimport movieCardTemplate from '../../templates/movieCard.hbs';\nimport modalMovieDetailsTemplate from '../../templates/modalMovieCard.hbs';\n\nimport { localStorageFilms } from '../classes/ModalBtn';\n\nimport CheckMovies from '../classes/CheckMovies';\n\n//Pagination init---------------------------------------------\n// import Pagination from '../classes/Pagination';\n// const container = document.querySelector('.pag');\n// const pagination = new Pagination(container);\n// pagination.on('aftermove', event => {\n//   console.log('page after move:', event.page);\n//   //here could be your code - api fetch movie with chosern page\n//   testApiPopMovies(event.page);\n// });\n// pagination.on('beforemove', event => {\n//   console.log('page before move:', event.page);\n// });\n//Pagination init---------------------------------------------\n\n//--Variables-------------------------------------------------------\nconst API_KEY_TEST = '1936ce94882661ecfd75d2c22e8905aa';\nconst url_trendings = `https://api.themoviedb.org/3/trending/movie/week?api_key=${API_KEY_TEST}&language=en-US`;\nconst url_genres = `https://api.themoviedb.org/3/genre/movie/list?api_key=${API_KEY_TEST}`;\nconst url_movie_details = `https://api.themoviedb.org/3/movie`;\n\n//--Variables-------------------------------------------------------\n\nconst checkMovies = new CheckMovies();\n\n// testApiPopMovies();\n\n//Test API----------------------------------------------------------\n\n// async function testApiPopMovies(page = 1) {\n//   try {\n//     //Get genres\n//     const response = await axios.get(url_genres);\n//     const genres = response.data.genres;\n//     // console.log(genres);\n\n//     //Add genres to temp LocalStorage\n//     // localStorage.setItem(GENRES_TEMP, JSON.stringify(genres));\n\n//     //Get movies list\n//     const trendings = await axios.get(url_trendings + '&page=' + page);\n//     const movies = trendings.data.results;\n//     const totalMovies = trendings.data.total_results;\n//     console.log(trendings.data);\n\n//     //Update movies genres_id with genres_name\n//     // moviesDataUpdate(genres, movies);\n\n//     checkMovies.update(movies, genres);\n\n//     //Render template\n//     tempRenderCards(movies);\n\n//     localStorageFilms.addItemsOnCurrentPage('itemsOnCurrentPage', movies);\n\n//     //Render Pagination\n//     pagination.updateTotalItems(totalMovies);\n//     pagination.render();\n//   } catch (error) {\n//     console.error(error);\n//   }\n// }\n\n//Test API----------------------------------------------------------\n\n// function tempRenderCards(movies) {\n//   const container = document.querySelector('.gallery__list');\n\n//   //library = false if render gallery\n//   //library = true if render library\n//   container.innerHTML = movieCardTemplate({ movies, library: true });\n// }\n\n////////////////////============Modal window movie card==============/////////////////////\nconst modalMovieDetails = document.querySelector('.backdrop');\nconst galleryRef = document.querySelector('.gallery');\n\ngalleryRef.addEventListener('click', onGalleryClickTest);\n\nfunction onGalleryClickTest(e) {\n  e.preventDefault();\n\n  const cardRef = e.target.closest('.movie-card__link');\n  if (!cardRef) {\n    return;\n  }\n\n  const movieId = cardRef.dataset.movieId;\n\n  testApiMovieDetails(movieId);\n}\n\nasync function testApiMovieDetails(movieId) {\n  const url = url_movie_details + '/' + movieId + '?api_key=' + API_KEY_TEST;\n  console.log(url);\n  const response = await axios.get(url);\n\n  // console.log(response.data);\n\n  renderMovieDetailsModal(response.data);\n}\n\nfunction renderMovieDetailsModal(movie) {\n  modalMovieDetails.classList.toggle('is-hidden', false);\n\n  //Check Poster Image\n  // checkMoviePoster(movie);\n  checkMovies.checkMoviePoster(movie);\n\n  //Check genres\n  // const genres = localStorage.getItem(GENRES_TEMP);\n  // checkGenres(movie, genres, 3);\n\n  const modalContent = modalMovieDetails.querySelector('.finfo-moviecard');\n  modalContent.innerHTML = modalMovieDetailsTemplate(movie);\n}\n////////////////////============Modal window movie card==============/////////////////////\n"],"names":["parcelRequire","$bpxeT","default","$9b572c3402116f69$var$API_KEY_TEST","$9b572c3402116f69$var$checkMovies","concat","$1LeHf","$9b572c3402116f69$var$modalMovieDetails","document","querySelector","$9b572c3402116f69$var$_testApiMovieDetails","$parcel$interopDefault","$2TvXO","mark","_callee","movieId","url","$9b572c3402116f69$var$url_movie_details","console","log","$9b572c3402116f69$require$axios","get","$9b572c3402116f69$var$renderMovieDetailsModal","_ctx","sent","data","apply","this","arguments","movie","classList","toggle","checkMoviePoster","innerHTML","$lc9OV","addEventListener","e","preventDefault","cardRef","target","closest","$9b572c3402116f69$var$testApiMovieDetails","dataset","$de91a1af95a41f9e$var$galleryHandler","$7MumP","addGalleryHandler","$de91a1af95a41f9e$var$containerPag","$de91a1af95a41f9e$var$pagination","$fc6Dh","$8Seta","localStorageFilms","saveItemsForArrayAfterReload","$85dma","$de91a1af95a41f9e$var$containerGallery","$gOExu","$kDGKR","$de91a1af95a41f9e$export$2e2bcd8739ae039","key","serializedState","localStorage","getItem","undefined","JSON","parse","error","message","$de91a1af95a41f9e$var$keyOne","$de91a1af95a41f9e$var$keyTwo","length","$de91a1af95a41f9e$var$tempRenderCards","$de91a1af95a41f9e$var$btn","$de91a1af95a41f9e$var$btnWatch","querySelectorAll","movies","library","event","nodeName","forEach","button","remove","textContent","add"],"version":3,"file":"myLibrary.5eeb6d21.js.map"}