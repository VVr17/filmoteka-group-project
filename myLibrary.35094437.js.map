{"mappings":"oeAAAA,EAAA,S,sGAWAC,EAAAC,kBAAkBC,gCAEK,IAAI,EAAAC,EAAAC,UACZC,oBAEf,MAAMC,EAAmBC,SAASC,cAAc,kBAG1CC,GAFU,IAAI,EAAAC,EAAAN,SAAQE,EAAkBK,EAAAP,SAEzBG,SAASC,cAAc,SACtCI,EAAa,IAAI,EAAAC,EAAAT,SAAWK,GAElC,IAAIK,EAAc,EAGdC,EAAgBC,EAAK,SAQzB,SAASC,EAAgBC,GACvB,MAAMC,EAAYZ,SAASC,cAAc,uBAE1BY,IAAXF,GACFC,EAAUE,WAAY,EAAAV,EAAAP,SAAS,C,OAAEc,EAAQI,SAAS,IAElDV,EAAWW,iBAAiBR,EAAcS,QAE1CZ,EAAWa,SAASX,GACpBF,EAAWc,UACJP,EAAUE,UAAY,E,CAIjC,SAASL,EAAKW,GACZ,IACE,MAAMC,EAAkBC,aAAaC,QAAQH,GAC7C,OAA2B,OAApBC,OAA2BR,EAAYW,KAAKC,MAAMJ,E,CACzD,MAAOK,GACPC,QAAQD,MAAM,oBAAqBA,EAAME,Q,EAK7C,SAASC,EAAMC,EAAeC,GACxBD,EAAcb,QAAU,GAC5BP,EAAgBoB,GAETA,EAAcb,OAAS,IAC9Be,EAAUF,EAAeC,E,CAG3B,SAASC,EAAUC,EAAeC,GAE5B,MAAMC,EAA0B,GAAdD,EAEhBE,EAAa,GACnB,IAAK,IAAIC,EAFWF,EAAY,GAEHE,EAAQF,EAAWE,SACjBxB,IAAzBoB,EAAcI,IAClBD,EAAWE,KAAKL,EAAcI,IAIhC3B,EAAgB0B,E,CAjDlB/B,EAAWkC,GAAG,aAAaC,IAEzBjC,EAAciC,EAAMC,KACpBT,EAAUxB,EAAeD,EAAY,SAiDjBM,IAAlBL,GACFqB,EAAMrB,EAAeD,GAMjB,MAAAmC,EAAM1C,SAASC,cAAc,WAC7B0C,EAAWD,EAAIE,iBAAiB,sBAItCF,EAAIG,iBAAiB,SAErB,SAAmBL,GACjB,GAA8B,WAA1BA,EAAMM,OAAOC,SACf,OAEFJ,EAASK,SAAQ,SAAUC,GACzBA,EAAOC,UAAUC,OAAO,iB,IAGO,YAA7BX,EAAMM,OAAOM,aAEfZ,EAAMM,OAAOI,UAAUG,IAAI,kBAC3B7C,EAAgBC,EAAK,SACzBF,EAAc,OACYM,IAAlBL,GACNqB,EAAMrB,EAAeD,QAEGM,IAAlBL,GACFE,EAAgBF,IAIkB,UAA7BgC,EAAMM,OAAOM,cAEpBZ,EAAMM,OAAOI,UAAUG,IAAI,kBAC3B7C,EAAgBC,EAAK,SACrBF,EAAc,OAEQM,IAAlBL,GACNqB,EAAMrB,EAAeD,QAEGM,IAAlBL,GACFE,EAAgBF,G","sources":["src/myLibrary.js"],"sourcesContent":["import './js/utils/handlebars-helpers';\nimport './js/classes/HeaderBtnHandler';\nimport './js/modal';\nimport './js/teamAccordion';\nimport Pagination from './js/classes/Pagination';\nimport GalleryHandler from './js/classes/GalleryHandler';\nimport template from './templates/movieCard.hbs';\nimport { localStorageFilms } from './js/classes/ModalBtn';\nimport Gallery from './js/classes/Gallery';\n// localStorage.clear();\n\nlocalStorageFilms.saveItemsForArrayAfterReload();\n\nconst galleryHandler = new GalleryHandler();\ngalleryHandler.addGalleryHandler();\n\nconst containerGallery = document.querySelector('.gallery__list');\nconst gallery = new Gallery(containerGallery, template);\n\nconst containerPag = document.querySelector('.pag');\nconst pagination = new Pagination(containerPag);\n\nlet currentPage = 1;\n// let btnStorage = \"watch\";\n// localStorage.setItem(\"btnStorage\", \"watch\");\nlet total_results = load('watch');\n\npagination.on('aftermove', event => {\n  // console.log(event.page);\n  currentPage = event.page;\n  pageValue(total_results, currentPage)\n});\n\nfunction tempRenderCards(movies) {\n  const container = document.querySelector('.gallery__list');\n  // console.log(movies);\n  if (movies !== undefined) {\n    container.innerHTML = template({ movies, library: true });\n\n    pagination.updateTotalItems(total_results.length);\n    // console.log(\"asfdafsasf\",currentPage);\n    pagination.goToPage(currentPage);\n    pagination.render();\n  } else { container.innerHTML = \"\"; }\n};\n\n\nfunction load(key) {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n};\n\n\nfunction audit(total_results, currentPage) {\n  if (total_results.length <= 20) {\n  tempRenderCards(total_results);\n}\nelse if (total_results.length > 20) {\n  pageValue(total_results, currentPage)\n}}\n\nfunction pageValue(total_results, currentPage) {\n  // console.log(currentPage);\n      const lastMovie = currentPage * 20;\n   const firstMovie = lastMovie - 20;\n  const moviesPars = [];\n  for (let index = firstMovie; index < lastMovie; index++) {\n    if (total_results[index] !== undefined) {\n    moviesPars.push(total_results[index]);\n  }\n   \n}\n  tempRenderCards(moviesPars);\n}\n\nif (total_results !== undefined) {\n  audit(total_results, currentPage);\n}\n\n\n\n// КНОПКИ\nconst btn = document.querySelector('.header');\nconst btnWatch = btn.querySelectorAll('.button--dark-mode');\n// console.log(btnWatch);\n\n// КНОПКИ\nbtn.addEventListener(\"click\", selectBtn);\n\nfunction selectBtn(event) {\n  if (event.target.nodeName !== 'BUTTON') {\n    return;\n  }\n  btnWatch.forEach(function (button) {\n    button.classList.remove('button--active');\n  });\n\n  if (event.target.textContent === 'watched') {\n    // console.log(\"watched\")\n    event.target.classList.add('button--active')\n    total_results = load('watch');\ncurrentPage = 1;\n    if (total_results !== undefined) {\n  audit(total_results, currentPage);\n    }\n    if (total_results === undefined) {\n      tempRenderCards(total_results, currentPage);\n    }\n// console.log(currentPage)\n  }\n  else if (event.target.textContent === 'queue') {\n    // console.log(\"queue\");\n    event.target.classList.add('button--active');\n    total_results = load('queue');\n    currentPage = 1;\n\n    if (total_results !== undefined) {\n  audit(total_results, currentPage);\n    }\n    if (total_results === undefined) {\n      tempRenderCards(total_results, currentPage);\n    }\n\n    // location.reload()\n    // console.log(currentPage)\n  }\n}\n\n\n"],"names":["parcelRequire","$cEPyp","localStorageFilms","saveItemsForArrayAfterReload","$6nUKJ","default","addGalleryHandler","$924ec6f518a00c90$var$containerGallery","document","querySelector","$924ec6f518a00c90$var$containerPag","$esqve","$hMpod","$924ec6f518a00c90$var$pagination","$9M0Rn","$924ec6f518a00c90$var$currentPage","$924ec6f518a00c90$var$total_results","$924ec6f518a00c90$var$load","$924ec6f518a00c90$var$tempRenderCards","movies","container","undefined","innerHTML","library","updateTotalItems","length","goToPage","render","key","serializedState","localStorage","getItem","JSON","parse","error","console","message","$924ec6f518a00c90$var$audit","total_results1","currentPage1","$924ec6f518a00c90$var$pageValue","total_results2","currentPage2","lastMovie","moviesPars","index","push","on","event","page","$924ec6f518a00c90$var$btn","$924ec6f518a00c90$var$btnWatch","querySelectorAll","addEventListener","target","nodeName","forEach","button","classList","remove","textContent","add"],"version":3,"file":"myLibrary.35094437.js.map"}